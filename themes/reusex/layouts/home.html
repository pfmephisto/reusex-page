{{ define "main" }}
{{- $hero := site.GetPage "sections/hero" -}}
<!-- Enhanced Hero Section -->
<section class="bg-teal-500 min-h-screen flex items-center section-padding">
  <div class="container-custom">
    <div class="grid lg:grid-cols-2 gap-12 items-center">
      <!-- Main Hero Content -->
      <div class="text-center">
        <h1 class="font-display text-2xl font-extrabold text-slate-200 sm:text-3xl lg:text-4xl leading-tight mb-6">
          {{ $hero.Params.title | default site.Title }}
        </h1>
        <p class="text-xl lg:text-2xl text-slate-200 leading-relaxed mb-8">
          {{ $hero.Params.subtitle | default .Params.description | default site.Params.description }}
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          {{ with $hero.Params.cta_primary }}
          {{- $url := .url | default "#demo" -}}
          {{- if hasPrefix $url "#" -}}
            <a href="{{ $url }}" class="btn-solid hero-btn-solid bg-slate-800 text-slate-200 px-6 py-3">
          {{- else if or (hasPrefix $url "http") (hasPrefix $url "mailto:") (hasPrefix $url "tel:") -}}
            <a href="{{ $url }}" class="btn-solid hero-btn-solid bg-slate-800 text-slate-200 px-6 py-3">
          {{- else -}}
            <a href="{{ $url | relURL }}" class="btn-solid hero-btn-solid bg-slate-800 text-slate-200 px-6 py-3">
          {{- end -}}
            {{ .text | default "Get Started Today" }}
          </a>
          {{ else }}
          <a href="#demo" class="btn-solid hero-btn-solid bg-slate-800 text-slate-200 px-6 py-3">
            Get Started Today
          </a>
          {{ end }}
          {{ with $hero.Params.cta_secondary }}
          {{- $url := .url | default "#about" -}}
          {{- if hasPrefix $url "#" -}}
            <a href="{{ $url }}" class="btn-outline hero-btn-outline border-slate-800 text-slate-800 px-6 py-3">
          {{- else if or (hasPrefix $url "http") (hasPrefix $url "mailto:") (hasPrefix $url "tel:") -}}
            <a href="{{ $url }}" class="btn-outline hero-btn-outline border-slate-800 text-slate-800 px-6 py-3">
          {{- else -}}
            <a href="{{ $url | relURL }}" class="btn-outline hero-btn-outline border-slate-800 text-slate-800 px-6 py-3">
          {{- end -}}
            {{ .text | default "Learn More" }}
          </a>
          {{ else }}
          <a href="#about" class="btn-outline hero-btn-outline border-slate-800 text-slate-800 px-6 py-3">
            Learn More
          </a>
          {{ end }}
        </div>
        
        <!-- Testimonial/Quote -->
        {{- $testimonial := site.GetPage "sections/testimonial" -}}
        {{ with $testimonial.Params }}
        <div class="mt-16 pt-8">
          <figure class="text-center lg:text-left">
            <blockquote class="text-lg font-medium text-slate-200 italic">
              {{ .quote }}
            </blockquote>
          </figure>
        </div>
        {{ end }}
      </div>
      
      <!-- Hero Visual -->
      <div class="hidden lg:block">
        <div class="relative">
          {{ with $hero.Params.hero_image }}
          <div class="rounded-2xl overflow-hidden shadow-2xl">
            <img src="{{ . | relURL }}" alt="Hero image" class="w-full h-auto object-cover rounded-xl" />
          </div>
          {{ else }}
          <div class="bg-white rounded-2xl p-8 shadow-2xl">
            <div class="h-96 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center text-white relative overflow-hidden">
              <div class="absolute inset-0 opacity-20">
                <svg width="100%" height="100%" viewBox="0 0 100 100">
                  <defs>
                    <pattern id="hero-grid" width="10" height="10" patternUnits="userSpaceOnUse">
                      <path d="M 10 0 L 0 0 0 10" fill="none" stroke="currentColor" stroke-width="0.5"/>
                    </pattern>
                  </defs>
                  <rect width="100" height="100" fill="url(#hero-grid)" />
                </svg>
              </div>
              <div class="text-center relative z-10">
                <div class="text-4xl font-bold mb-2">{{ site.Title }}</div>
                <div class="text-lg opacity-90">Sustainable Future</div>
              </div>
            </div>
          </div>
          {{ end }}
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Enhanced Problem Section -->
{{- $challenges := site.GetPage "sections/challenges" -}}
{{ with $challenges.Params }}
<section id="about" class="section-padding bg-white">
  <div class="container-custom">
    <div class="text-center mb-20">
      <h2 class="font-display text-4xl font-extrabold text-slate-900 sm:text-5xl mb-6">{{ .title }}</h2>
      <p class="text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed">
        {{ .subtitle }}
      </p>
    </div>
    <div class="grid md:grid-cols-3 gap-8 lg:gap-12">
      {{ range .items }}
      <div class="text-center group">
        <div class="relative mx-auto mb-6">
          <div class="bg-gradient-to-br from-{{ .color }}-50 to-{{ .color }}-100 rounded-2xl w-20 h-20 flex items-center justify-center mx-auto shadow-md group-hover:shadow-lg transition-shadow duration-300">
            {{ if eq .icon "warning" }}
            <svg class="w-10 h-10 text-{{ .color }}-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" />
            </svg>
            {{ else if eq .icon "puzzle" }}
            <svg class="w-10 h-10 text-{{ .color }}-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 16a9.065 9.065 0 0 1-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.611L5 14.5" />
            </svg>
            {{ else if eq .icon "currency" }}
            <svg class="w-10 h-10 text-{{ .color }}-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
            </svg>
            {{ end }}
          </div>
        </div>
        <h3 class="font-display text-xl font-bold text-slate-900 mb-3">{{ .title }}</h3>
        <p class="text-slate-600 leading-relaxed">{{ .description }}</p>
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

<!-- Enhanced Solution Section -->
{{- $solution := site.GetPage "sections/solution" -}}
{{ with $solution.Params }}
<section class="section-padding bg-white">
  <div class="container-custom">
    <div class="text-center mb-16">
      <h2 class="font-display text-4xl font-extrabold text-slate-900 sm:text-5xl mb-6">{{ .title }}</h2>
      <p class="text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed">
        {{ .subtitle }}
      </p>
    </div>
    <div class="grid lg:grid-cols-2 gap-12 items-center">
      <div class="space-y-8">
        {{ range .features }}
        <div class="flex items-start space-x-6">
          <div class="flex-shrink-0 w-12 h-12 bg-{{ .color }}-600 rounded-lg flex items-center justify-center">
            {{ if eq .icon "lightning" }}
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>
            {{ else if eq .icon "network" }}
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
            </svg>
            {{ else if eq .icon "analytics" }}
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
            </svg>
            {{ end }}
          </div>
          <div>
            <h3 class="text-xl font-bold text-slate-900 mb-2">{{ .title }}</h3>
            <p class="text-slate-600 leading-relaxed">{{ .description }}</p>
          </div>
        </div>
        {{ end }}
      </div>
      <div class="bg-slate-50 rounded-2xl p-8">
        <div class="h-80 bg-gradient-to-br from-blue-100 to-purple-100 rounded-xl flex items-center justify-center">
          <div class="text-center">
            <div class="w-24 h-24 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
              <svg class="w-12 h-12 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <h4 class="text-xl font-bold text-slate-900 mb-2">Dashboard Preview</h4>
            <p class="text-slate-600">Track your impact in real-time</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{{ end }}

<!-- Enhanced Stats Section -->
{{- $stats := site.GetPage "sections/stats" -}}
{{ with $stats.Params }}
<section class="section-padding bg-slate-900">
  <div class="container-custom">
    <div class="text-center mb-16">
      <h2 class="text-3xl font-extrabold text-white sm:text-4xl mb-4">{{ .title }}</h2>
      <p class="text-xl text-slate-300 max-w-2xl mx-auto">
        {{ .subtitle }}
      </p>
    </div>
    <div class="grid md:grid-cols-4 gap-8 text-center">
      {{ range .metrics }}
      <div class="bg-slate-800 rounded-2xl p-8 hover:bg-slate-700 transition-colors duration-300">
        <div class="text-4xl font-extrabold text-white mb-2">{{ .value }}</div>
        <div class="text-blue-200 font-medium">{{ .label }}</div>
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

<!-- Enhanced CTA Section -->
{{- $cta := site.GetPage "sections/cta" -}}
{{ with $cta.Params }}
<section id="demo" class="section-padding bg-gradient-to-br from-blue-50 to-indigo-100">
  <div class="container-custom text-center">
    <div class="max-w-4xl mx-auto">
      <h2 class="font-display text-4xl font-extrabold text-slate-900 sm:text-5xl mb-6">
        {{ .title }}
      </h2>
      <p class="text-xl text-slate-600 mb-12 max-w-2xl mx-auto leading-relaxed">
        {{ .subtitle }}
      </p>
      <div class="flex flex-col sm:flex-row gap-6 justify-center items-center">
        {{ with .primary_button }}
        {{- $url := .url | default "#" -}}
        {{- if hasPrefix $url "#" -}}
          <a href="{{ $url }}" class="btn-solid btn-primary text-lg px-10 py-4">
        {{- else if or (hasPrefix $url "http") (hasPrefix $url "mailto:") (hasPrefix $url "tel:") -}}
          <a href="{{ $url }}" class="btn-solid btn-primary text-lg px-10 py-4">
        {{- else -}}
          <a href="{{ $url | relURL }}" class="btn-solid btn-primary text-lg px-10 py-4">
        {{- end -}}
          {{ .text | default "Start Free Trial" }}
        </a>
        {{ else }}
        <a href="#" class="btn-solid btn-primary text-lg px-10 py-4">
          Start Free Trial
        </a>
        {{ end }}
        {{ with .secondary_button }}
        {{- $url := .url | default "#" -}}
        {{- if hasPrefix $url "#" -}}
          <a href="{{ $url }}" class="btn-outline btn-secondary text-lg px-10 py-4">
        {{- else if or (hasPrefix $url "http") (hasPrefix $url "mailto:") (hasPrefix $url "tel:") -}}
          <a href="{{ $url }}" class="btn-outline btn-secondary text-lg px-10 py-4">
        {{- else -}}
          <a href="{{ $url | relURL }}" class="btn-outline btn-secondary text-lg px-10 py-4">
        {{- end -}}
          {{ .text | default "Schedule Demo" }}
        </a>
        {{ else }}
        <a href="#" class="btn-outline btn-secondary text-lg px-10 py-4">
          Schedule Demo
        </a>
        {{ end }}
      </div>
      {{ if .features }}
      <div class="mt-12 flex items-center justify-center space-x-8 text-sm text-slate-500">
        {{ range .features }}
        <div class="flex items-center space-x-2">
          <svg class="w-5 h-5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg>
          <span>{{ . }}</span>
        </div>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

<!-- Content from markdown -->
{{ if .Content }}
<section class="py-20 bg-gray-50">
  <div class="container mx-auto px-6">
    <div class="prose prose-lg max-w-none">
      {{ .Content }}
    </div>
  </div>
</section>
{{ end }}

<!-- Enhanced Recent Posts -->
{{- $blog := site.GetPage "sections/blog" -}}
{{ with $blog.Params }}
{{ if .show_posts }}
{{ $posts := (where site.RegularPages "Type" "post") }}
{{ $posts = (where $posts "Draft" false) }}
{{ if $posts }}
<section class="section-padding bg-white">
  <div class="container-custom">
    <div class="text-center mb-16">
      <h2 class="font-display text-3xl font-extrabold text-slate-900 sm:text-4xl mb-4">{{ .title }}</h2>
      <p class="text-lg text-slate-600 max-w-2xl mx-auto">
        {{ .subtitle }}
      </p>
    </div>
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      {{ range first (.posts_count | default 6) $posts }}
        <article class="group card-modern overflow-hidden">
          <div class="h-48 bg-gradient-to-br from-blue-100 via-indigo-100 to-purple-100 flex items-center justify-center relative overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-br from-blue-600/10 to-purple-600/10 group-hover:from-blue-600/20 group-hover:to-purple-600/20 transition-colors duration-300"></div>
            <div class="relative text-center z-10">
              <div class="w-16 h-16 bg-white/90 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-300">
                <svg class="w-8 h-8 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 1 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" />
                </svg>
              </div>
            </div>
          </div>
          <div class="p-6">
            <h3 class="font-display text-xl font-bold mb-3">
              <a href="{{ .RelPermalink }}" class="text-slate-900 hover:text-blue-600 transition-colors duration-200">{{ .LinkTitle }}</a>
            </h3>
            <p class="text-slate-600 mb-4 leading-relaxed">{{ .Summary | truncate 120 }}</p>
            <div class="flex items-center justify-between text-sm">
              <time class="text-slate-500 font-medium">{{ .Date.Format "January 2, 2006" }}</time>
              <a href="{{ .RelPermalink }}" class="text-blue-600 hover:text-blue-700 font-semibold group-hover:translate-x-1 transition-transform duration-200">
                Read more â†’
              </a>
            </div>
          </div>
        </article>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}
{{ end }}
{{ end }}
{{ end }}
