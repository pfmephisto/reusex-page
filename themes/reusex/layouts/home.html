{{ define "main" }}
{{- $hero := site.GetPage "sections/hero" -}}
<!-- Enhanced Hero Section (Section 1 - Teal Band) -->
<section style="background-color: var(--section1-bg);" class="min-h-screen flex items-center section-padding">
  <div class="container-custom">
    <div class="grid lg:grid-cols-2 gap-12 items-center">
      <!-- Main Hero Content -->
      <div class="text-center">
        <h1 class="font-display text-4xl font-extrabold sm:text-5xl leading-tight mb-6" style="color: var(--section1-text);">
          {{ $hero.Params.title | default site.Title }}
        </h1>
        <p class="text-xl lg:text-2xl leading-relaxed mb-12" style="color: var(--section1-text);">
          {{ $hero.Params.subtitle | default .Params.description | default site.Params.description }}
        </p>
        
        <!-- Hero Visual (Mobile - between title and buttons) -->
        <div class="lg:hidden mb-8">
          <div class="relative">
            {{ with $hero.Params.hero_image }}
            <div class="rounded-2xl overflow-hidden shadow-2xl">
              <img src="{{ . | relURL }}" alt="{{ $hero.Params.hero_image_alt | default $hero.Params.title }}" class="w-full h-auto object-cover" />
            </div>
            {{ else }}
            <div class="bg-white rounded-2xl p-8 shadow-2xl">
              <div class="h-96 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center text-white relative overflow-hidden">
                <div class="absolute inset-0 opacity-20">
                  <svg width="100%" height="100%" viewBox="0 0 100 100">
                    <defs>
                      <pattern id="hero-grid" width="10" height="10" patternUnits="userSpaceOnUse">
                        <path d="M 10 0 L 0 0 0 10" fill="none" stroke="currentColor" stroke-width="0.5"/>
                      </pattern>
                    </defs>
                    <rect width="100" height="100" fill="url(#hero-grid)" />
                  </svg>
                </div>
                <div class="text-center relative z-10">
                  <div class="text-4xl font-bold mb-2">{{ site.Title }}</div>
                  <div class="text-lg opacity-90">Sustainable Future</div>
                </div>
              </div>
            </div>
            {{ end }}
          </div>
        </div>
        
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          {{ with $hero.Params.cta_primary }}
          {{- $url := .url | default "#demo" -}}
          {{- if hasPrefix $url "#" -}}
            <a href="{{ $url }}" class="btn-solid hero-btn-solid px-6 py-3" style="background-color: var(--section1-btn-primary-bg); color: var(--section1-btn-primary-text);">
          {{- else if or (hasPrefix $url "http") (hasPrefix $url "mailto:") (hasPrefix $url "tel:") -}}
            <a href="{{ $url }}" class="btn-solid hero-btn-solid px-6 py-3" style="background-color: var(--section1-btn-primary-bg); color: var(--section1-btn-primary-text);">
          {{- else -}}
            <a href="{{ $url | relURL }}" class="btn-solid hero-btn-solid px-6 py-3" style="background-color: var(--section1-btn-primary-bg); color: var(--section1-btn-primary-text);">
          {{- end -}}
            {{ .text | default "Get Started Today" }}
          </a>
          {{ else }}
          <a href="#demo" class="btn-solid hero-btn-solid px-6 py-3" style="background-color: var(--section1-btn-primary-bg); color: var(--section1-btn-primary-text);">
            Get Started Today
          </a>
          {{ end }}
          {{ with $hero.Params.cta_secondary }}
          {{- $url := .url | default "#about" -}}
          {{- if hasPrefix $url "#" -}}
            <a href="{{ $url }}" class="btn-outline hero-btn-outline px-6 py-3" style="border-color: var(--section1-btn-secondary-border); color: var(--section1-btn-secondary-text); background-color: var(--section1-btn-secondary-bg);">
          {{- else if or (hasPrefix $url "http") (hasPrefix $url "mailto:") (hasPrefix $url "tel:") -}}
            <a href="{{ $url }}" class="btn-outline hero-btn-outline px-6 py-3" style="border-color: var(--section1-btn-secondary-border); color: var(--section1-btn-secondary-text); background-color: var(--section1-btn-secondary-bg);">
          {{- else -}}
            <a href="{{ $url | relURL }}" class="btn-outline hero-btn-outline px-6 py-3" style="border-color: var(--section1-btn-secondary-border); color: var(--section1-btn-secondary-text); background-color: var(--section1-btn-secondary-bg);">
          {{- end -}}
            {{ .text | default "Learn More" }}
          </a>
          {{ else }}
          <a href="#about" class="btn-outline hero-btn-outline px-6 py-3" style="border-color: var(--section1-btn-secondary-border); color: var(--section1-btn-secondary-text); background-color: var(--section1-btn-secondary-bg);">
            Learn More
          </a>
          {{ end }}
        </div>
        
        <!-- Testimonial/Quote -->
        {{- $testimonial := site.GetPage "sections/testimonial" -}}
        {{ with $testimonial.Params }}
        <div class="mt-12 pt-8">
          <figure class="text-center lg:text-left">
            <blockquote class="text-lg font-medium italic" style="color: var(--section1-text);">
              {{ .quote }}
            </blockquote>
          </figure>
        </div>
        {{ end }}
      </div>
      
      <!-- Hero Visual -->
      <div class="hidden lg:block">
        <div class="relative">
          {{ with $hero.Params.hero_image }}
          <div class="rounded-2xl overflow-hidden shadow-2xl">
            <img src="{{ . | relURL }}" alt="{{ $hero.Params.hero_image_alt | default $hero.Params.title }}" class="w-full h-auto object-cover" />
          </div>
          {{ else }}
          <div class="bg-white rounded-2xl p-8 shadow-2xl">
            <div class="h-96 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center text-white relative overflow-hidden">
              <div class="absolute inset-0 opacity-20">
                <svg width="100%" height="100%" viewBox="0 0 100 100">
                  <defs>
                    <pattern id="hero-grid" width="10" height="10" patternUnits="userSpaceOnUse">
                      <path d="M 10 0 L 0 0 0 10" fill="none" stroke="currentColor" stroke-width="0.5"/>
                    </pattern>
                  </defs>
                  <rect width="100" height="100" fill="url(#hero-grid)" />
                </svg>
              </div>
              <div class="text-center relative z-10">
                <div class="text-4xl font-bold mb-2">{{ site.Title }}</div>
                <div class="text-lg opacity-90">Sustainable Future</div>
              </div>
            </div>
          </div>
          {{ end }}
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Enhanced Problem Section (Section 2 - Navy Alt) -->
{{- $challenges := site.GetPage "sections/challenges" -}}
{{ with $challenges.Params }}
<section id="about" class="section-padding" style="background-color: var(--section2-bg);">
  <div class="container-custom">
    <div class="text-center mb-20">
      <h2 class="font-display text-4xl font-extrabold sm:text-5xl mb-6" style="color: var(--section2-heading);">{{ .title }}</h2>
      <p class="text-xl max-w-3xl mx-auto leading-relaxed" style="color: var(--section2-body);">
        {{ .subtitle }}
      </p>
    </div>
    <div class="grid md:grid-cols-3 gap-8 lg:gap-12">
      {{ range .items }}
      <div class="text-center group rounded-2xl p-6 transition-colors duration-300" style="background-color: var(--section2-card-bg); border: 1px solid var(--section2-card-border);">
        <div class="relative mx-auto mb-6">
          <div class="rounded-2xl w-20 h-20 flex items-center justify-center mx-auto shadow-md group-hover:shadow-lg transition-shadow duration-300" style="background-color: var(--highlight-soft-bg);">
            {{ if eq .icon "warning" }}
            <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5" style="color: var(--highlight);">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" />
            </svg>
            {{ else if eq .icon "puzzle" }}
            <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5" style="color: var(--highlight);">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 16a9.065 9.065 0 0 1-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.611L5 14.5" />
            </svg>
            {{ else if eq .icon "currency" }}
            <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5" style="color: var(--highlight);">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
            </svg>
            {{ end }}
          </div>
        </div>
        <h3 class="font-display text-xl font-bold mb-3" style="color: var(--section2-heading);">{{ .title }}</h3>
        <p class="leading-relaxed" style="color: var(--section2-body);">{{ .description }}</p>
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

<!-- Enhanced Solution Section (Section 3 - Dark Base) -->
{{- $solution := site.GetPage "sections/solution" -}}
{{ with $solution.Params }}
<section class="section-padding" style="background-color: var(--section3-bg);">
  <div class="container-custom">
    <div class="text-center mb-16">
      <h2 class="font-display text-4xl font-extrabold sm:text-5xl mb-6" style="color: var(--section3-heading);">{{ .title }}</h2>
      <p class="text-xl max-w-3xl mx-auto leading-relaxed" style="color: var(--section3-body);">
        {{ .subtitle }}
      </p>
    </div>
    <div class="grid lg:grid-cols-2 gap-12 items-center">
      <div class="space-y-8">
        {{ range .features }}
        <div class="flex items-start space-x-6">
          <div class="flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center" style="background-color: var(--primary-teal);">
            {{ if eq .icon "lightning" }}
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: var(--button-text-dark);">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>
            {{ else if eq .icon "network" }}
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: var(--button-text-dark);">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
            </svg>
            {{ else if eq .icon "analytics" }}
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: var(--button-text-dark);">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
            </svg>
            {{ end }}
          </div>
          <div>
            <h3 class="text-xl font-bold mb-2" style="color: var(--section3-heading);">{{ .title }}</h3>
            <p class="leading-relaxed" style="color: var(--section3-body);">{{ .description }}</p>
          </div>
        </div>
        {{ end }}
      </div>
      <!-- Before-and-After Image Slider -->
      <div>
        <div class="before-after-slider">
          <div class="before-after-wrapper">
            <img src="{{ "images/after.jpg" | relURL }}" alt="After: Building with reused materials" class="after-image">
            <img src="{{ "images/before.jpg" | relURL }}" alt="Before: Old building" class="before-image">
          </div>
          <div class="before-after-divider">
            <div class="before-after-handle" tabindex="0"></div>
          </div>
          <span class="before-after-label before" aria-hidden="true">Before</span>
          <span class="before-after-label after" aria-hidden="true">After</span>
        </div>
        <p class="text-center mt-4 text-sm" style="color: var(--section3-muted);">
          Raw scan / point cloud → AI segmented components + simple 3D model
        </p>
      </div>
    </div>
  </div>
</section>
{{ end }}

<!-- Enhanced Stats Section (Section 2 - Navy Alt) -->
{{- $stats := site.GetPage "sections/stats" -}}
{{ with $stats.Params }}
<section class="section-padding" style="background-color: var(--section2-bg);">
  <div class="container-custom">
    <div class="text-center mb-16">
      <h2 class="text-3xl font-extrabold sm:text-4xl mb-4" style="color: var(--section2-heading);">{{ .title }}</h2>
      <p class="text-xl max-w-2xl mx-auto" style="color: var(--section2-body);">
        {{ .subtitle }}
      </p>
    </div>
    <div class="grid md:grid-cols-4 gap-8 text-center">
      {{ range .metrics }}
      <div class="rounded-2xl p-8 transition-colors duration-300" style="background-color: var(--section2-card-bg); border: 1px solid var(--section2-card-border);">
        <div class="text-4xl font-extrabold mb-2" style="color: var(--section2-heading);">{{ .value }}</div>
        <div class="font-medium" style="color: var(--section2-muted);">{{ .label }}</div>
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

<!-- Logo Section (Section 3 - Dark Base) -->
{{- $logos := site.GetPage "sections/logos" -}}
{{ with $logos.Params }}
<section class="section-padding" style="background-color: var(--section3-bg);">
  <div class="container-custom">
    <div class="text-center mb-16">
      <h2 class="text-3xl font-extrabold sm:text-4xl mb-4" style="color: var(--section3-heading);">{{ .title }}</h2>
    </div>
    <div class="grid md:grid-cols-4 gap-8 items-center justify-items-center">
      {{ range .logos }}
      <div class="flex items-center justify-center p-4">
        <img src="{{ .image | relURL }}" alt="{{ .alt }}" class="max-w-full h-auto" style="max-height: 100px;">
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

<!-- Enhanced CTA Section (Section 1 - Teal variant) -->
{{- $cta := site.GetPage "sections/cta" -}}
{{ with $cta.Params }}
<section id="demo" class="section-padding" style="background-color: var(--section1-bg);">
  <div class="container-custom text-center">
    <div class="max-w-4xl mx-auto">
      <h2 class="font-display text-4xl font-extrabold sm:text-5xl mb-6" style="color: var(--section1-text);">
        {{ .title }}
      </h2>
      <p class="text-xl mb-12 max-w-2xl mx-auto leading-relaxed" style="color: var(--section1-text);">
        {{ .subtitle }}
      </p>
      <div class="flex flex-col sm:flex-row gap-6 justify-center items-center">
        {{ with .primary_button }}
        {{- $url := .url | default "#" -}}
        {{- if hasPrefix $url "#" -}}
          <a href="{{ $url }}" class="btn-solid text-lg px-10 py-4" style="background-color: var(--section1-btn-primary-bg); color: var(--section1-btn-primary-text);">
        {{- else if or (hasPrefix $url "http") (hasPrefix $url "mailto:") (hasPrefix $url "tel:") -}}
          <a href="{{ $url }}" class="btn-solid text-lg px-10 py-4" style="background-color: var(--section1-btn-primary-bg); color: var(--section1-btn-primary-text);">
        {{- else -}}
          <a href="{{ $url | relURL }}" class="btn-solid text-lg px-10 py-4" style="background-color: var(--section1-btn-primary-bg); color: var(--section1-btn-primary-text);">
        {{- end -}}
          {{ .text | default "Start Free Trial" }}
        </a>
        {{ else }}
        <a href="#" class="btn-solid text-lg px-10 py-4" style="background-color: var(--section1-btn-primary-bg); color: var(--section1-btn-primary-text);">
          Start Free Trial
        </a>
        {{ end }}
        {{ with .secondary_button }}
        {{- $url := .url | default "#" -}}
        {{- if hasPrefix $url "#" -}}
          <a href="{{ $url }}" class="btn-outline text-lg px-10 py-4" style="border-color: var(--section1-btn-secondary-border); color: var(--section1-btn-secondary-text); background-color: var(--section1-btn-secondary-bg);">
        {{- else if or (hasPrefix $url "http") (hasPrefix $url "mailto:") (hasPrefix $url "tel:") -}}
          <a href="{{ $url }}" class="btn-outline text-lg px-10 py-4" style="border-color: var(--section1-btn-secondary-border); color: var(--section1-btn-secondary-text); background-color: var(--section1-btn-secondary-bg);">
        {{- else -}}
          <a href="{{ $url | relURL }}" class="btn-outline text-lg px-10 py-4" style="border-color: var(--section1-btn-secondary-border); color: var(--section1-btn-secondary-text); background-color: var(--section1-btn-secondary-bg);">
        {{- end -}}
          {{ .text | default "Schedule Demo" }}
        </a>
        {{ else }}
        <a href="#" class="btn-outline text-lg px-10 py-4" style="border-color: var(--section1-btn-secondary-border); color: var(--section1-btn-secondary-text); background-color: var(--section1-btn-secondary-bg);">
          Schedule Demo
        </a>
        {{ end }}
      </div>
      {{ if .features }}
      <div class="mt-12 flex items-center justify-center space-x-8 text-sm" style="color: var(--section1-text-muted);">
        {{ range .features }}
        <div class="flex items-center space-x-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: var(--section1-text);">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg>
          <span>{{ . }}</span>
        </div>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

<!-- Content from markdown -->
{{ if .Content }}
<section class="py-20 bg-gray-50">
  <div class="container mx-auto px-6">
    <div class="prose prose-lg max-w-none">
      {{ .Content }}
    </div>
  </div>
</section>
{{ end }}

<!-- Enhanced Recent Posts (Section 2 - Navy Alt) -->
{{- $blog := site.GetPage "sections/blog" -}}
{{ with $blog.Params }}
{{ if .show_posts }}
{{ $posts := (where site.RegularPages "Type" "post") }}
{{ $posts = (where $posts "Draft" false) }}
{{ if $posts }}
<section class="section-padding" style="background-color: var(--section2-bg);">
  <div class="container-custom">
    <div class="text-center mb-16">
      <h2 class="font-display text-3xl font-extrabold sm:text-4xl mb-4" style="color: var(--section2-heading);">{{ .title }}</h2>
      <p class="text-lg max-w-2xl mx-auto" style="color: var(--section2-body);">
        {{ .subtitle }}
      </p>
    </div>
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      {{ range first (.posts_count | default 6) $posts }}
        <article class="group overflow-hidden rounded-2xl transition-all duration-300" style="background-color: var(--section2-card-bg); border: 1px solid var(--section2-card-border);">
          <div class="h-48 flex items-center justify-center relative overflow-hidden" style="background: linear-gradient(135deg, var(--section2-card-bg) 0%, var(--card-hover) 100%);">
            <div class="relative text-center z-10">
              <div class="w-16 h-16 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-300" style="background-color: var(--primary-teal);">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: var(--button-text-dark);">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 1 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" />
                </svg>
              </div>
            </div>
          </div>
          <div class="p-6">
            <h3 class="font-display text-xl font-bold mb-3">
              <a href="{{ .RelPermalink }}" class="transition-colors duration-200" style="color: var(--section2-heading);">{{ .LinkTitle }}</a>
            </h3>
            <p class="mb-4 leading-relaxed" style="color: var(--section2-body);">{{ .Summary | truncate 120 }}</p>
            <div class="flex items-center justify-between text-sm">
              <time class="font-medium" style="color: var(--section2-muted);">{{ .Date.Format "January 2, 2006" }}</time>
              <a href="{{ .RelPermalink }}" class="font-semibold group-hover:translate-x-1 transition-transform duration-200" style="color: var(--link);">
                Read more →
              </a>
            </div>
          </div>
        </article>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}
{{ end }}
{{ end }}
{{ end }}
